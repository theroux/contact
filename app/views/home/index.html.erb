<% provide(:title, "Dashboard") %>



<div class="import--outer">
  <section class="import">
  <h3 class="import--heading">Bulk Contacts Upload</h3>
  <p>We currently support TSV format</p>

  <%= form_tag import_contacts_path, multipart: true, class: 'form-upload' do %>
    <%= file_field_tag :file, class: 'form-upload--chooser' %>
    <%= submit_tag "Upload", class: 'form-upload--submit' %>
  <% end %>
  </section>
</div>

<div class="filter--outer">
  <section class="filter">
    <h3 class="filter--heading">Filters</h3>
    <div class="show-only">
      <p>Show only contacts with&hellip;</p>
      <div class="show-only--button-group">
        <button class="show-only--dotcom show-only--button" data-filter="data-dotcom">.com emails</button>
        <button class="show-only--international  show-only--button" data-filter="data-international">international phone numbers</button>
        <button class="show-only--extension show-only--button" data-filter="data-extension">phone number extensions</button>
      </div>
    </div>
    <div class="sort-by">
      <p>Sort alphabetically by&hellip;</p>
      <div class="sort-by--buttons-wrap">
        <div class="sort-by--button-group">
          <button class="sort-by--email sort-by--button" data-sort="email">email</button>
          <button class="sort-by--company sort-by--button" data-sort="company">company</button>
          <button class="sort-by--first sort-by--button" data-sort="first">first name</button>
          <button class="sort-by--last sort-by--button default" data-sort="last">last name</button>
        </div>
        <div class="alpha">
          <div class="alpha--button-group">
            <button class="alpha--button default" data-alpha="alpha">A to Z</button>
            <button class="alpha--button" data-alpha="reverse">Z to A</button>
          </div>
        </div>
      </div>
    </div>
  </section>
</div>

<div class="data--outer">
  <section class="data">
    <h2 class="data--heading">Contacts</h2>
    <div class="data--alert"><%= flash[:notice] %></div>

    <div class="data--list">
    <% @contacts.order("last_name asc").each do |contact| %>
      <div class="contact"
        data-dotcom="<%= contact.dotcom %>"
        data-international="<%= contact.international %>"
        <% if contact.extension %>
          data-extension="true"
        <% else %>
          data-extension="false"
        <% end %>
         data-first="<%= contact.first_name %>"
         data-last="<%= contact.last_name %>"
         data-company="<%= contact.company_name %>"
         data-email="<%= contact.email_address %>"
      >
        <div class="contact--actions">
          <%= link_to contact, method: 'delete', "data-type" => "json", remote: true, class: 'delete-contact' do %>
            <span class="icon">&times;</span> <span class="text">delete</span>
          <% end %>
        </div>
        <div class="contact--person">
          <div  class="contact--name"><%= contact.first_name %> <%= contact.last_name %></div>
          <div class="contact--company"><%= contact.company_name %></div>
        </div>
        <div class="contact--details">
          <div class="contact--email">
            <a href="mailto:<%= contact.email_address %>" class="contact--email-link"><%= contact.email_address %></a>
          </div>
          <div class="contact--phone">
            <span class="contact--number"><%= contact.phone_number %></span>
            <% if contact.extension %><span class="contact--extension">ext. <%= contact.extension %></span><% end %>
          </div>
        </div>

      </div>
    <% end %>
    </div>
  </section>
</div> <!-- end data -->
